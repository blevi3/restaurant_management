{% extends 'base.html' %} {% load humanize %} 

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title></title>

    


  </head>
  <body>
    {% block pagecontent %}
    <div class = "panel" style="border:none;background-color: transparent;">
    <div class = "panel-heading">
    <div class="pull-right">
      <span class="clickable filter" data-toggle="tooltip"  data-container="body">
        <i class="glyphicon glyphicon-filter" ></i>
      </span>
    </div>
    </div>
    <br>
    <div class="panel-body" >
      <input type="text" class="form-control" id="dev-table-filter" data-action="filter" data-filters="#tbl" placeholder="Filter Drinks" />
    </div>
  </div>
    <table class="table table-striped" id="tbl">
      <thead>
        <tr>
          <th>Drinks</th>
          <th>Price</th>
          
          {% if request.user.is_staff %}
          <th>Modify</th>
          <th>Remove</th>
          {% endif %}
        </tr>
      </thead>
      <tbody>
        {% for item in item_list %}
        <tr>
          <td id="tdName">{{ item.name }}</td>
          <td id="tdPrice">{{ item.price }}</td>
          <td><a href="{% url 'add_to_cart' item.id %}">Add to cart</a></td>
          {% if request.user.is_staff %}
          <td>
            <input type="hidden" id = "editdata" name="editdata" value="{{ item.id }}" />
            <button
              type="submit"
              class="btn btn-primary modify-button"
              id="modify-button"
            >
              Modify
            </button>
          </td>
          <td>
            <form method="post" class="form-inline">
              {% csrf_token %}
              <input type="hidden" name="remove" value="{{ item.id }}" />
              <input type="hidden" name="remove" value="{{ item.id }}" />
              <button type="submit" class="btn btn-danger">Remove</button>
            </form>
          </td>
          {% endif %}
        </tr>
        {% endfor %}
      </tbody>
    </table>


    {% if request.user.is_staff %}
    <button class="btn btn-primary" type="submit" onclick="openForm('myForm')">
      Add
    </button>

    <div class="form-popup" id="myForm">
      <form action="" method="post" class="form-container">
        {% csrf_token %}
        <h1>Add new item</h1>


        <label for="type"><b>Type</b></label>
        <select name="type" id="type">
          <option value="Food">Food</option>
          <option value="Drink">Drink</option>
        </select>
        <br />
        <br />

        <label for="category" id="category"><b>Category</b></label>
        
        <select name="category" id="category">
          <option value="Beer">Beer</option>
          <option value="Wine">Wine</option>
          <option value="Wine">Hamburgers</option>
          <option value="Wine">Dips</option>
          <option value="Wine">Snacks</option>
        </select>
        <br />
        <br />

        <label for="add"><b>Name</b></label>
        <input placeholder="Enter name" name="add" required />
        <br />

        <label for="price"><b>Price</b></label>
        <input type="number" placeholder="Enter price" name="price" required />

        <button type="submit" class="btn">Add Item</button>
        <button type="button" class="btn cancel" onclick="closeForm('myForm')">
          Close
        </button>

      </form>
    </div>


    <div class="modal" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Modify Item</h4>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              onclick="closeForm('myModal')"
            >
              &times;
            </button>
          </div>

          <div class="modal-body">
            <form method="post">
              {% csrf_token %}
              <input type="hidden" id = "editItemID" name="editItemID" />
              <div class="form-group">
                <label for="Type">Type</label>
                <select
                  class="form-control"
                  id="Type"
                  onchange="updateCategory()"
                >
                  <option>Option 1</option>
                  <option>Option 2</option>
                </select>
              </div>
              <div class="form-group">
                <label for="category">Category</label>
                <select class="form-control" id="category"></select>
              </div>
              <div class="form-group">
                <label for="name">Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="name"
                  name="edit"
                  placeholder="Enter name"
                />
              </div>

              <div class="form-group">
                <label for="price">Price</label>
                <input
                  type="text"
                  class="form-control"
                  id="price"
                  name="price"
                  placeholder="Enter price"
                />
              </div>
            
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-danger"
              data-dismiss="modal"
              onclick="closeForm('myModal')"
            >
              Close
            </button>
            <button type="submit" class="btn btn-success">Save</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      function openForm(id) {
        document.getElementById(id).style.display = "block";
      }

      function closeForm(id) {
        document.getElementById(id).style.display = "none";
      }
      function openForm(id) {
        document.getElementById(id).style.display = "block";
      }

      function closeForm(id) {
        document.getElementById(id).style.display = "none";
      }
    </script>
    {% endif %} {% endblock %}
    
  </body>
</html>

